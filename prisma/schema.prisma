generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Модели для отчетов
model Order {
  id                    Int       @id @default(autoincrement())
  rk                    String
  city                  String
  phone                 String
  clientName            String
  statusOrder           String
  masterId              Int?
  result                Int?
  expenditure           Int?
  clean                 Int?
  createDate            DateTime  @default(now())
  closingData           String?
  dateMeeting           String?
  directorId            Int?
  callcentreOperatorId  Int?
  callcentreAdminId     Int?
  
  @@map("order")
}

model Master {
  id             Int       @id @default(autoincrement())
  cities         String[]  @default([])
  name           String
  login          String?   @unique
  password       String?
  passportDoc    String?   @map("passport_doc")
  contractDoc    String?   @map("contract_doc")
  statusWork     String?   @map("status_work")
  dateCreate     DateTime  @default(now()) @map("date_create")
  note           String?
  tgId           String?   @unique @map("tg_id")
  chatId         String?   @map("chat_id")
  createdAt      DateTime  @default(now()) @map("created_at")
  updatedAt      DateTime  @updatedAt @map("updated_at")
  
  @@map("master")
}

model Director {
  id             Int       @id @default(autoincrement())
  cities         String[]  @default([])
  name           String
  login          String    @unique
  password       String
  contractDoc    String?   @map("contract_doc")
  passportDoc    String?   @map("passport_doc")
  dateCreate     DateTime  @default(now()) @map("date_create")
  note           String?
  tgId           String?   @unique @map("tg_id")
  chatId         String?   @map("chat_id")
  createdAt      DateTime  @default(now()) @map("created_at")
  updatedAt      DateTime  @updatedAt @map("updated_at")
  
  @@map("director")
}

model CallcentreOperator {
  id             Int       @id @default(autoincrement())
  name           String
  login          String    @unique
  password       String
  city           String
  status         String
  statusWork     String    @map("status_work")
  passport       String?
  contract       String?
  dateCreate     DateTime  @map("date_create")
  note           String?
  createdAt      DateTime  @default(now()) @map("created_at")
  updatedAt      DateTime  @updatedAt @map("updated_at")
  sipAddress     String?   @map("sip_address")
  
  @@map("callcentre_operator")
}

model CallcentreAdmin {
  id             Int       @id @default(autoincrement())
  name           String
  login          String    @unique
  password       String
  statusWork     String?   @map("status_work")
  dateCreate     DateTime  @default(now()) @map("date_create")
  note           String?
  createdAt      DateTime  @default(now()) @map("created_at")
  updatedAt      DateTime  @updatedAt @map("updated_at")
  
  @@map("callcentre_admin")
}

model Cash {
  id                Int       @id @default(autoincrement())
  orderId           Int       @unique
  amount            Int
  type              String
  status            String
  approvedBy        Int?
  approvedDate      DateTime?
  createdAt         DateTime  @default(now())
  
  @@map("cash")
}

model Call {
  id              Int       @id @default(autoincrement())
  rk              String
  city            String
  phoneClient     String    @map("phone_client")
  phoneAts        String    @map("phone_ats")
  dateCreate      DateTime  @map("date_create")
  operatorId      Int       @map("operator_id")
  status          String
  callId          String?   @unique @map("call_id")
  duration        Int?
  recordUrl       String?   @map("record_url")
  createdAt       DateTime  @default(now()) @map("created_at")
  
  @@map("calls")
}




